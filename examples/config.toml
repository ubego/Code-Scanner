# Code Scanner Configuration - General Template
# Human-focused checks that work for any project.
#
# Copy this file to your project root as `config.toml`.
# For language-specific checks, see other examples in this directory.

# ==============================================================================
# LLM Backend Configuration
# ==============================================================================

[llm]
# LM Studio (default)
backend = "lm-studio"   # Backend type: "lm-studio" or "ollama"
host = "localhost"       # Server hostname (usually localhost)
port = 1234              # Server port (LM Studio default: 1234, Ollama: 11434)
model = "qwen2.5-coder-7b-instruct"  # Optional for LM Studio
timeout = 600            # Request timeout in seconds
context_limit = 16384    # Context window size in tokens (minimum 16384 recommended)

# Ollama alternative (uncomment and comment out LM Studio above):
# backend = "ollama"     # Use Ollama backend
# host = "localhost"
# port = 11434           # Ollama default port
# model = "qwen3:4b"     # Model name (REQUIRED for Ollama)
# timeout = 600
# context_limit = 16384


# ==============================================================================
# Human-Focused Code Checks
# ==============================================================================
# These checks focus on issues that require semantic understanding.
# Leave linting to your language's static analysis tools.

[[checks]]
pattern = "*"
checks = [
    # Architectural checks
    "Check that classes and modules have a single responsibility and are not doing too many things.",
    "Check for circular dependencies between components or modules.",
    "Check that business logic is not placed in wrong layers (e.g., data access in UI layer).",
    "Check for tight coupling between components that should be independent.",
    "Check for god classes or files that have too many responsibilities.",
    # Security checks
    "Check for hardcoded secrets, API keys, or credentials in the code.",
    "Check that user input is properly validated and sanitized before use.",
    "Check for SQL injection or command injection vulnerabilities.",
    "Check that sensitive data is not logged or exposed in error messages.",
    "Check that authentication and authorization checks are present in critical paths.",
    # Logic and semantic checks
    "Check for off-by-one errors in boundary conditions.",
    "Check for race conditions in concurrent or multi-threaded code.",
    "Check for resource leaks where files, connections, or locks are not properly released.",
    "Check for incorrect assumptions about data ordering or uniqueness.",
    "Check that error handling does not silently swallow failures.",
    # API contract checks
    "Check for breaking changes to public interfaces.",
    "Check for inconsistent error handling patterns across the codebase.",
    "Check that functions return consistent types and do not vary by code path.",
    "Check that external input and API responses are validated before use.",
    # Technical debt checks
    "Check for dead code or unused files that should be removed.",
    "Check for commented-out code blocks that should be removed.",
    "Check for TODO or FIXME comments that have lingered too long.",
    "Check for duplicate implementations that should be consolidated.",
    "Check for opportunities to optimize algorithms and data structures.",
    "Check that all changed code paths handle edge cases and error conditions correctly.",
    "Check that the overall design fits the existing architecture and abstractions.",
    "Check that complex logic is broken down into small, understandable units with clear responsibilities.",
    "Check that names of variables, methods, and classes are clear, descriptive, and consistent.",
    "Check for obvious performance issues like N+1 queries or unnecessary loops.",
    "Check that database queries and external service calls are efficient and properly constrained.",
    "Check that public APIs, configuration changes, or new behaviors are properly documented.",
    "Check that comments and documentation are accurate, necessary, and up to date.",
    "Check that logging and error messages are clear, informative, and follow project conventions.",
    "Check that no sensitive data (keys, PII) is logged or exposed in output.",
    "Check that configuration changes have safe, sensible defaults.",
    "Check that feature flags are named consistently and reflect their purpose.",
]

# ==============================================================================
# Ignore Patterns (files to skip during scanning)
# ==============================================================================
# Files matching these patterns with empty checks will be ignored.
# Add or modify patterns as needed for your project.

[[checks]]
pattern = "*.md, *.txt, *.rst, *.html, *.json, *.toml, *.yaml, *.yml"
checks = []
